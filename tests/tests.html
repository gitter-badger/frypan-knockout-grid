<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Frypan Tests</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="../node_modules/mocha/mocha.css">
  <style>td { line-height: 18px; }</style>
</head>
<body>
  <script src="../node_modules/babel-core/browser-polyfill.js"></script>
  <script src="../node_modules/mocha/mocha.js"></script>
  <script src="../node_modules/chai/chai.js"></script>
  <script src="../node_modules/sinon-browser-only/sinon.js"></script>
  <script src="../node_modules/sinon-chai/lib/sinon-chai.js"></script>
  <script src="../node_modules/chai-dom/chai-dom.js"></script>

  <div id="mocha"></div>

  <script>
    mocha.ui('bdd')
    mocha.timeout(4000)
    var should = chai.should()
    chai.config.includeStack = true
  </script>

  <script src="../node_modules/knockout/build/output/knockout-latest.debug.js"></script>
  <script src="../frypan.js"></script>
  <script src="common.js"></script>

  <script src="column-templates.js"></script>
  <script src="searching.js"></script>
  <script src="saving-settings.js"></script>
  <script src="filtering.js"></script>
  <script src="sorting.js"></script>
  <script src="asyncrounous-sources.js"></script>
  <script src="dynamic-columns.js"></script>
  <script src="virtualization.js"></script>
  <script src="column-resizing.js"></script>

  <script>
    if ('callPhantom' in window) {
      (window.mochaPhantomJS || mocha).run()
    } else {
      window.onload = function() {
        var runner = mocha.run(),
            tests = []
        runner.on('end', function(){
          window.global_test_results = {
            passed: runner.stats.passes,
            failed: runner.stats.failures,
            total: runner.stats.tests,
            duration: runner.stats.duration,
            tests: tests
          }
        })

        runner.on('pass', function(test) {
          tests.push({
            name: test.fullTitle(),
            result: true,
            message: test.duration + 'ms'
          })
        })

        runner.on('fail', function (test, err) {
          tests.push({
            name: test.fullTitle(),
            result: false,
            duration: test.duration,
            message: (err.message || '<no message>') + ': ' + err.stack
          })
        })
      }
    }
  </script>
</body>
</html>